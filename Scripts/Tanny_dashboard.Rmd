
```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```
```{r}
packages = c(
  'dplyr',
  'tidyverse',
  'sf', 
  'tmap',
  'plotly',
  'stringr',
  'shinydashboard',
  'ggstatsplot'
)

for (p in packages) {
  if (!require(p, character.only = T)) {
    install.packages(p)
  }
  library(p, character.only = T)
}

mainDF <- read.csv("merged data\\dataset.csv")
```

```{r}
   rainfall<- mainDF %>%
    filter(str_detect(mainDF$Measurement,"Daily Rainfall Total")) %>%
    group_by(Region,subzone_name,Station,Year,Month)%>%
    summarise(avg_monthly_rainfall = mean(Value),
              sum_monthly_rainfall = sum(Value))%>%
    left_join(mainDF, .) %>%
    select(
           'Region',
           'subzone_name',
           'Station',
           'Year',
           'Month',
           'Value'
           'avg_monthly_rainfall',
           'sum_monthly_rainfall',
           )%>%
    filter(Year == 2019)

  # rainfall <- unique(rainfall)
    # na.rm

   temperature<- mainDF %>%
    filter(str_detect(mainDF$Measurement,"Mean Temperature")) %>%
    group_by(Region,subzone_name,Station,Year,Month)%>%
    summarise(Mean_Temperature = mean(Value))%>%
    left_join(mainDF, .) %>%
    select(
           'Region',
           'subzone_name',
           'Station',
           'Year',
           'Month',
           'Mean_Temperature',)%>%
    filter(Year == 2019)
   
  # temperature <- unique(temperature)

```

```{r eruptions, echo=FALSE}
inputPanel(
  selectInput("n_breaks", label = "Number of bins:",
              choices = c(10, 20, 35, 50), selected = 20),
  
  sliderInput("bw_adjust", label = "Bandwidth adjustment:",
              min = 0.2, max = 2, value = 1, step = 0.2)
)

renderPlot({
  ggstatsplot::ggbetweenstats(
    data = temperature,
    x = Month,
    y = Value,
    title = "Distribution of sepal length across Iris species",
    messages = FALSE
  ) + # further modification outside of ggstatsplot
    ggplot2::coord_cartesian(ylim = c(3, 8)) +
    ggplot2::scale_y_continuous(breaks = seq(3, 8, by = 1))
})
```