install.packages("lubridate")
url <-'http://www.weather.gov.sg/climate-historical-daily/'
setwd <- '..\\Weather Dataset\\'
install.packages("readr")
url
setwd
ls
getwd()
getwd()..
getwd()[:-10]
getwd() + ""
setwd("C:\\Users\\LINGXING\\Desktop\\GIT\\Va-Project\\Scripting of data\\Weather Dataset")
years=read.csv("Years.csv")
months=read.csv("Months.csv")
years=read.csv("YYYY.xlsx")
months=read.csv("MM.xlsx")
years=read.csv("Years.csv")
months=read.csv("Months.csv")
areacode = read.csv("AreaID.csv")
for (i in (1:16)){
for( j in (1:12)){
if (j>9){
#dowload the url and save it as a temporary file
downloadurl=paste("http://www.pjm.com/pub/account/lmpmonthly/",as.character(years[i,1]),as.character(months[j,1]),"-da.zip",sep="")
temp="tempfile"
download.file(downloadurl,temp)
assad
for (i in (1:16)){
for( j in (1:12)){
if (j>9){
#dowload the url and save it as a temporary file
downloadurl=paste("http://www.pjm.com/pub/account/lmpmonthly/",as.character(years[i,1]),as.character(months[j,1]),"-da.zip",sep="")
temp="tempfile"
download.file(downloadurl,temp)for (i in (1:16)){
for( j in (1:12)){
if (j>9){
#dowload the url and save it as a temporary file
downloadurl=paste("http://www.pjm.com/pub/account/lmpmonthly/",as.character(years[i,1]),as.character(months[j,1]),"-da.zip",sep="")
temp="tempfile"
download.file(downloadurl,temp)
View(areacode)
for (x in (1:49)){}
for (x in (1:49)){
for (i in (1:10)){
for( j in (1:12)){
if (j>9){
#dowload the url and save it as a temporary file
downloadurl=paste("http://www.weather.gov.sg/files/dailydata/DAILYDATA_",as.character(areacode[x:1]),"_",as.character(years[i,1]),as.character(months[j,1]),".csv",sep="")
temp="tempfile"
download.file(downloadurl,temp)
unlink(temp) #deletetempfile
}
#If j is between 1 and 10, the only difference is that a "0" has to be added
#in front of the month number
else {
downloadurl=paste("http://www.weather.gov.sg/files/dailydata/DAILYDATA_",as.character(areacode[x:1]),"_",as.character(years[i,1]),"0",as.character(months[j,1]),".csv",sep="")
temp="tempfile"
download.file(downloadurl,temp)
unlink(temp) #deletetempfile
}
}}
}
for (x in (1:49)){
for (i in (1:10)){
for( j in (1:12)){
if (j>9){
#dowload the url and save it as a temporary file
downloadurl=paste("http://www.weather.gov.sg/files/dailydata/DAILYDATA_",as.character(areacode[x,1]),"_",as.character(years[i,1]),as.character(months[j,1]),".csv",sep="")
temp="tempfile"
download.file(downloadurl,temp)
unlink(temp) #deletetempfile
}
#If j is between 1 and 10, the only difference is that a "0" has to be added
#in front of the month number
else {
downloadurl=paste("http://www.weather.gov.sg/files/dailydata/DAILYDATA_",as.character(areacode[x,1]),"_",as.character(years[i,1]),"0",as.character(months[j,1]),".csv",sep="")
temp="tempfile"
download.file(downloadurl,temp)
unlink(temp) #deletetempfile
}
}}
}
areacode = read.csv("AreaID.csv")
years = read.csv("Years.csv")
for (x in (1:49)){
for (i in (1:8)){
for( j in (1:12)){
if (j>9){
#dowload the url and save it as a temporary file
downloadurl=paste("http://www.weather.gov.sg/files/dailydata/DAILYDATA_",as.character(areacode[x,1]),"_",as.character(years[i,1]),as.character(months[j,1]),".csv",sep="")
temp= as.character(areacode[x]),"_",as.character(years[i]),"_",as.character(months[j]),".csv"
download.file(downloadurl,temp)
}
#If j is between 1 and 10, the only difference is that a "0" has to be added
#in front of the month number
else {
downloadurl=paste("http://www.weather.gov.sg/files/dailydata/DAILYDATA_",as.character(areacode[x,1]),"_",as.character(years[i,1]),"0",as.character(months[j,1]),".csv",sep="")
temp= as.character(areacode[x]),"_",as.character(years[i]),"_","0", as.character(months[j]),".csv"
download.file(downloadurl,temp)
}
}}
}
for (x in (1:49)){
for (i in (1:8)){
for( j in (1:12)){
if (j>9){
#dowload the url and save it as a temporary file
downloadurl=paste("http://www.weather.gov.sg/files/dailydata/DAILYDATA_",as.character(areacode[x,1]),"_",as.character(years[i,1]),as.character(months[j,1]),".csv",sep="")
temp= as.character(areacode[x]),"_",as.character(years[i]),"_",as.character(months[j]),".csv"
download.file(downloadurl,temp)
}
#If j is between 1 and 10, the only difference is that a "0" has to be added
#in front of the month number
else {
downloadurl=paste("http://www.weather.gov.sg/files/dailydata/DAILYDATA_",as.character(areacode[x,1]),"_",as.character(years[i,1]),"0",as.character(months[j,1]),".csv",sep="")
temp= as.character(areacode[x]),"_",as.character(years[i]),"_","0", as.character(months[j]),".csv"
download.file(downloadurl,temp)
}
}}
}
for (x in (1:49)){
for (i in (1:8)){
for( j in (1:12)){
if (j>9){
#dowload the url and save it as a temporary file
downloadurl=paste("http://www.weather.gov.sg/files/dailydata/DAILYDATA_",as.character(areacode[x,1]),"_",as.character(years[i,1]),as.character(months[j,1]),".csv",sep="")
temp= paste(as.character(areacode[x]),"_",as.character(years[i]),"_",as.character(months[j]),".csv",sep = "")
download.file(downloadurl,temp)
}
#If j is between 1 and 10, the only difference is that a "0" has to be added
#in front of the month number
else {
downloadurl=paste("http://www.weather.gov.sg/files/dailydata/DAILYDATA_",as.character(areacode[x,1]),"_",as.character(years[i,1]),"0",as.character(months[j,1]),".csv",sep="")
temp= paste(as.character(areacode[x]),"_",as.character(years[i]),"_","0", as.character(months[j]),".csv", sep = "")
download.file(downloadurl,temp)
}
}}
}
for (x in (1:49)){
for (i in (1:8)){
for( j in (1:12)){
if (j>9){
#dowload the url and save it as a temporary file
downloadurl=paste("http://www.weather.gov.sg/files/dailydata/DAILYDATA_",as.character(areacode[x,1]),"_",as.character(years[i,1]),as.character(months[j,1]),".csv",sep="")
temp= paste(as.character(areacode[x,1]),"_",as.character(years[i,1]),"_",as.character(months[j,1]),".csv",sep = "")
download.file(downloadurl,temp)
}
#If j is between 1 and 10, the only difference is that a "0" has to be added
#in front of the month number
else {
downloadurl=paste("http://www.weather.gov.sg/files/dailydata/DAILYDATA_",as.character(areacode[x,1]),"_",as.character(years[i,1]),"0",as.character(months[j,1]),".csv",sep="")
temp= paste(as.character(areacode[x,1]),"_",as.character(years[i,1]),"_","0", as.character(months[j,1]),".csv", sep = "")
download.file(downloadurl,temp)
}
}}
}
options(warn = -1)
years = read.cvs("Years.csv")
years = read.csv("Years.csv")
months = read.csv("Months.csv")
areacode = read.csv("AreadID.csv")
years = read.csv("Years.csv")
months = read.csv("Months.csv")
areacode = read.csv("AreaID.csv")
oldw <- getOption("warn")
options(warn = -1)
for (x in (1:49)){
for (i in (1:8)){
for( j in (1:12)){
if (j>9){
#dowload the url and save it as a temporary file
downloadurl=paste("http://www.weather.gov.sg/files/dailydata/DAILYDATA_",as.character(areacode[x,1]),"_",as.character(years[i,1]),as.character(months[j,1]),".csv",sep="")
temp= paste(as.character(areacode[x,1]),"_",as.character(years[i,1]),"_",as.character(months[j,1]),".csv",sep = "")
tryCatch(
download.file(downloadurl,temp),
error = function(e) print(paste(file, 'did not work out')))
}
#If j is between 1 and 10, the only difference is that a "0" has to be added
#in front of the month number
else {
downloadurl=paste("http://www.weather.gov.sg/files/dailydata/DAILYDATA_",as.character(areacode[x,1]),"_",as.character(years[i,1]),"0",as.character(months[j,1]),".csv",sep="")
temp= paste(as.character(areacode[x,1]),"_",as.character(years[i,1]),"_","0", as.character(months[j,1]),".csv", sep = "")
download.file(downloadurl,temp)
tryCatch(
download.file(downloadurl,temp),
error = function(e) print(paste(file, 'did not work out')))
}
}
}
}
years = read.csv("Years.csv")
months = read.csv("Months.csv")
areacode = read.csv("AreaID.csv")
oldw <- getOption("warn")
options(warn = -1)
for (x in (1:49)){
for (i in (1:8)){
for( j in (1:12)){
if (j>9){
#dowload the url and save it as a temporary file
downloadurl=paste("http://www.weather.gov.sg/files/dailydata/DAILYDATA_",as.character(areacode[x,1]),"_",as.character(years[i,1]),as.character(months[j,1]),".csv",sep="")
temp= paste(as.character(areacode[x,1]),"_",as.character(years[i,1]),"_",as.character(months[j,1]),".csv",sep = "")
}
#If j is between 1 and 10, the only difference is that a "0" has to be added
#in front of the month number
else {
downloadurl=paste("http://www.weather.gov.sg/files/dailydata/DAILYDATA_",as.character(areacode[x,1]),"_",as.character(years[i,1]),"0",as.character(months[j,1]),".csv",sep="")
temp= paste(as.character(areacode[x,1]),"_",as.character(years[i,1]),"_","0", as.character(months[j,1]),".csv", sep = "")
}
tryCatch(
download.file(downloadurl,temp),
error = function(e) print(paste('did not work out')))
}
}
}
options(warn = oldw)
print(months[1])
#
#                 downloadurl=paste("http://www.weather.gov.sg/files/dailydata/DAILYDATA_",as.character(areacode[x,1]),"_",as.character(years[i,1]),"0",as.character(months[j,1]),".csv",sep="")
#                 temp= paste(as.character(areacode[x,1]),"_",as.character(years[i,1]),"_","0", as.character(months[j,1]),".csv", sep = "")
#             }
#             tryCatch(
#                      download.file(downloadurl,temp),
#                      error = function(e) print(paste('did not work out')))
#         }
#     }
# }
options(warn = oldw)
View(months)
years = read.csv("Years.csv")
months = list('01','02','03','04','05','06','07','08','09','10','11','12')
print(months[1])
areacode = read.csv("AreaID.csv")
print(months[1])
oldw <- getOption("warn")
options(warn = -1)
# for (x in (1:49)){
#     for (i in (1:8)){
#         for( j in (1:12)){
#             if (j>9){
#                 #dowload the url and save it as a temporary file
#                 downloadurl=paste("http://www.weather.gov.sg/files/dailydata/DAILYDATA_",as.character(areacode[x,1]),"_",as.character(years[i,1]),as.character(months[j,1]),".csv",sep="")
#                 temp= paste(as.character(areacode[x,1]),"_",as.character(years[i,1]),"_",as.character(months[j,1]),".csv",sep = "")
#             }
#
#             #If j is between 1 and 10, the only difference is that a "0" has to be added
#             #in front of the month number
#             else {
#
#                 downloadurl=paste("http://www.weather.gov.sg/files/dailydata/DAILYDATA_",as.character(areacode[x,1]),"_",as.character(years[i,1]),"0",as.character(months[j,1]),".csv",sep="")
#                 temp= paste(as.character(areacode[x,1]),"_",as.character(years[i,1]),"_","0", as.character(months[j,1]),".csv", sep = "")
#             }
#             tryCatch(
#                      download.file(downloadurl,temp),
#                      error = function(e) print(paste('did not work out')))
#         }
#     }
# }
options(warn = oldw)
years = list("2012","2013","2014","2015","2016","2017","2018","2019")
months = list('01','02','03','04','05','06','07','08','09','10','11','12')
areacode = read.csv("AreaID.csv")
print(months[1])
oldw <- getOption("warn")
options(warn = -1)
for (x in areacode){
for (i in years){
for( j in months){
# if (j>9){
#dowload the url and save it as a temporary file
downloadurl=paste("http://www.weather.gov.sg/files/dailydata/DAILYDATA_",as.character(areacode[x,1]),"_",as.character(years[i,1]),as.character(months[j,1]),".csv",sep="")
# temp= paste(as.character(areacode[x,1]),"_",as.character(years[i,1]),"_",as.character(months[j,1]),".csv",sep = "")
temp= paste(as.character(areacode[x,1]),"_",i,"_",j,".csv",sep = "")
print(temp)
# }
#If j is between 1 and 10, the only difference is that a "0" has to be added
#in front of the month number
# else {
#
#     downloadurl=paste("http://www.weather.gov.sg/files/dailydata/DAILYDATA_",as.character(areacode[x,1]),"_",as.character(years[i,1]),"0",as.character(months[j,1]),".csv",sep="")
#     temp= paste(as.character(areacode[x,1]),"_",as.character(years[i,1]),"_","0", as.character(months[j,1]),".csv", sep = "")
# }
# tryCatch(
#          download.file(downloadurl,temp),
#          error = function(e) print(paste('did not work out')))
}
}
}
years = list("2012","2013","2014","2015","2016","2017","2018","2019")
months = list('01','02','03','04','05','06','07','08','09','10','11','12')
areacode = read.csv("AreaID.csv")
print(months[1])
oldw <- getOption("warn")
options(warn = -1)
for (x in areacode){
for (i in years){
for( j in months){
# if (j>9){
#dowload the url and save it as a temporary file
# downloadurl=paste("http://www.weather.gov.sg/files/dailydata/DAILYDATA_",as.character(areacode[x,1]),"_",as.character(years[i,1]),as.character(months[j,1]),".csv",sep="")
# temp= paste(as.character(areacode[x,1]),"_",as.character(years[i,1]),"_",as.character(months[j,1]),".csv",sep = "")
temp= paste(as.character(areacode[x,1]),"_",i,"_",j,".csv",sep = "")
print(temp)
# }
#If j is between 1 and 10, the only difference is that a "0" has to be added
#in front of the month number
# else {
#
#     downloadurl=paste("http://www.weather.gov.sg/files/dailydata/DAILYDATA_",as.character(areacode[x,1]),"_",as.character(years[i,1]),"0",as.character(months[j,1]),".csv",sep="")
#     temp= paste(as.character(areacode[x,1]),"_",as.character(years[i,1]),"_","0", as.character(months[j,1]),".csv", sep = "")
# }
# tryCatch(
#          download.file(downloadurl,temp),
#          error = function(e) print(paste('did not work out')))
}
}
}
years = list("2012","2013","2014","2015","2016","2017","2018","2019")
months = list('01','02','03','04','05','06','07','08','09','10','11','12')
areacode = read.csv("AreaID.csv")
print(months[1])
oldw <- getOption("warn")
options(warn = -1)
for (x in areacode){
for (i in years){
for( j in months){
#dowload the url and save it as a temporary file
downloadurl=paste("http://www.weather.gov.sg/files/dailydata/DAILYDATA_",
as.character(areacode[x,1]),"_",
years[i],months[j],".csv",sep="")
temp= paste(as.character(areacode[x,1]),"_",i,"_",j,".csv",sep = "")
print(temp)
# tryCatch(
#          download.file(downloadurl,temp),
#          error = function(e) print(paste('did not work out')))
}
}
print(lb)
}
cls
cler
clear
years = list("2012","2013","2014","2015","2016","2017","2018","2019")
months = list('01','02','03','04','05','06','07','08','09','10','11','12')
areacode = read.csv("AreaID.csv")
options(warn = -1)
for (x in areacode){
for (i in years){
for( j in months){
#dowload the url and save it as a temporary file
downloadurl=paste("http://www.weather.gov.sg/files/dailydata/DAILYDATA_",
as.character(areacode[x,1]),"_",
years[i],months[j],".csv",sep="")
temp= paste(".\\raw data\\",as.character(areacode[x,1]),"_",i,"_",j,".csv",sep = "")
tryCatch(
download.file(downloadurl,temp),
error = function(e) print(paste('did not work out')))
}
}
}
years = list("2012","2013","2014","2015","2016","2017","2018","2019")
months = list('01','02','03','04','05','06','07','08','09','10','11','12')
areacode = read.csv("AreaID.csv")
options(warn = -1)
for (area in areacode){
for (year in years){
for( month in months){
#dowload the url and save it as a temporary file
downloadurl=paste("http://www.weather.gov.sg/files/dailydata/DAILYDATA_",
area,"_",year,month,".csv",sep="")
temp= paste(".\\raw data\\",area,"_",year,"_",month,".csv",sep = "")
tryCatch(
download.file(downloadurl,temp),
error = function(e) print(paste('did not work out')))
}
}
}
tryCatch(
download.file(downloadurl,temp),
error = function(e) print(paste('did not work out'))
)
View(months)
options(warn = -1)
# years = list("2011","2012","2013","2014","2015","2016","2017","2018","2019")
months = list('01','02','03','04','05','06','07','08','09','10','11','12')
areacode = read.csv("AreaID.csv")
years <- c()
for(i in 1980:2019) {
years <- c(years,sprintf("%s",i))
}
for (area in areacode){
for (year in years){
for( month in months){
#dowload the url and save it as a temporary file
downloadurl=paste("http://www.weather.gov.sg/files/dailydata/DAILYDATA_",area,"_",year,month,".csv",sep="")
temp= paste(".\\raw data\\",area,"_",year,"_",month,".csv",sep = "")
tryCatch(
download.file(downloadurl,temp),
error = function(e) print(paste('did not work out'))
)
}
}
}
options(warn = -1)
# years = list("2011","2012","2013","2014","2015","2016","2017","2018","2019")
months = list('01','02','03','04','05','06','07','08','09','10','11','12')
areacode = read.csv("AreaID.csv")
years <- list(1980:2019)
for (x in 1:nrow(areacode)){
area = areacode[x,1]
for (i in 1:length(years[[1]]-1)){
year = years[[1]][i]
for( month in months){
downloadurl=paste("http://www.weather.gov.sg/files/dailydata/DAILYDATA_",area,"_",sprintf("%s",year),month,".csv",sep="")
temp= paste(".\\raw data\\",area,"_",sprintf("%s",year),"_",month,".csv",sep = "")
skip_to_next <- FALSE
# possibleError <- tryCatch(download.file(downloadurl,temp),error = function(e) print(paste('did not work out')))
tryCatch(download.file(downloadurl,temp), error = function(e) { skip_to_next <<- TRUE})
if(skip_to_next) { next }
}
}
}
options(warn = 0)
