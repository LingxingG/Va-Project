
```{r warning=FALSE}
options(warn = -1)
# years = list("2011","2012","2013","2014","2015","2016","2017","2018","2019")
months = list('01','02','03','04','05','06','07','08','09','10','11','12')
areacode = read.csv("AreaID.csv")
years <- list(1980:2019)

for (x in 1:nrow(areacode)){
  area = areacode[x,1]
  for (i in 1:length(years[[1]]-1)){
    year = years[[1]][i]
    for( month in months){
        downloadurl=paste("http://www.weather.gov.sg/files/dailydata/DAILYDATA_",area,"_",sprintf("%s",year),month,".csv",sep="")
        temp= paste(".\\raw data\\",area,"_",sprintf("%s",year),"_",month,".csv",sep = "")

        skip_to_next <- FALSE

        # possibleError <- tryCatch(download.file(downloadurl,temp),error = function(e) print(paste('did not work out')))
        tryCatch(download.file(downloadurl,temp), error = function(e) { skip_to_next <<- TRUE})
        if(skip_to_next) { next }
    }
  }
}
    
options(warn = 0)
```

```{r}
library(data.table)
setwd("raw data\\")
files <- list.files(pattern="*.csv")
DT = do.call(rbind, lapply(files, fread))
DT = rbindlist(lapply(files, fread))
setwd("..\\")
write.csv(DT,'..\\Weather Dataset\\merged data\\dataset.csv',row.names=F)

```

```{r}


```

```{r}

```

